(function(a,c,g){"use strict";if(a===g)throw"jQuery is required. Please make sure you include a reference to jQuery and that this script is included below it.";var b={},l=a('<div id="overlay"></div>'),e=a('<div id="modal"></div>'),s=a('<div id="main"></div>'),h=a('<div id="title"></div>'),k=a('<div id="content"></div>'),f=a('<div id="actions"></div>'),r,o,n,i,t,q,p,j,d,m,u=/\.(jpg|gif|png|jpeg|bpm)/i;r=function(a){if(!a){h.hide();return}h.html(a)};o=function(a){a=a||"Ooops.";k.empty().append(a)};n=function(a){f.empty();if(!a)f.append(i(q));else for(var b=0,c=a.length;b<c;b++)f.append(i(a[b]))};i=function(b){if(!b)return;var c=a("<a />",b);if(b.callback){var d=b.ctx?b.ctx:this;c.click(function(){b.callback.apply(d,arguments)})}return c};p=function(d){d.preventDefault();var c=a(this),e={el:this};b.confirm(j(c,e))};m=function(f){f.preventDefault();var e=a(this),c={el:this},d=e.attr("href");j(e,c);if(d.charAt(0)==="#"){c.content=a(d).html();b.open(c)}else if(u.test(d)){c.content=a("<img />",{src:d});b.open(c)}else a.get(d,function(a){c.content=a;b.open(c)})};q={text:"close","class":"primary close",href:"#close"};j=function(b,a){a=a||{};d(b,"title",a);d(b,"width",a);d(b,"height",a);d(b,"content",a);d(b,"processtext",a);d(b,"canceltext",a);d(b,"processcallback",a);d(b,"cancelcallback",a);a.action=b.attr("href");return a};d=function(b,a,c){if(b.data(a))c[a]=b.data(a)};b.confirm=function(j){var i={content:"Are you sure about that?",title:"please confirm"},d={},h=[],f={},e={};a.extend(d,i,j);f.text=d.canceltext||"cancel";f.href="#close";f["class"]=d["class"]||"close";f.callback=c[d.cancelcallback]||g;f.ctx=d.el||g;h.push(f);e.text=d.processtext||"confirm";e.href=d.action||"#";e["class"]=d["class"]||"danger";e.callback=c[d.processcallback]||b.closeAndContinue;e.ctx=d.el||g;h.push(e);d.actions=h;b.open(d)};b.center=function(){var d,b;d=Math.max(a(c).height()-e.outerHeight(),0)/2;b=Math.max(a(c).width()-e.outerWidth(),0)/2;e.css({top:d+a(c).scrollTop(),left:b+a(c).scrollLeft()})};b.open=function(d){r(d.title);o(d.content);n(d.actions);e.css({width:d.width||"auto",height:d.height||"auto"});b.center();a(c).bind("resize.modal",b.center);e.fadeIn("fast","swing");l.show()};b.close=function(b){b&&b.preventDefault();e.hide();l.hide();k.empty();h.empty();f.empty();a(c).unbind("resize.modal")};b.closeAndContinue=function(){b.close()};t=function(){s.append(h,k,f);e.append(s);e.hide()};a(function(){a("body").append(l,e);a("#modal").delegate(".close","click",b.close);a(".confirm").live("click",p);a(".dialog").live("click",m)});if(!c.dialog)c.dialog=b;t()})(window.jQuery,window)