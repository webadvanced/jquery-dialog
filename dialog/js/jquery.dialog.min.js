(function(a,c,f){"use strict";if(a===f)throw"jQuery is required. Please make sure you include a reference to jQuery and that this script is included below it.";var b={},l=a('<div id="overlay"></div>'),e=a('<div id="modal"></div>'),s=a('<div id="main"></div>'),h=a('<div id="title"></div>'),k=a('<div id="content"></div>'),g=a('<div id="actions"></div>'),r,o,n,i,t,q,p,j,d,m;r=function(a){if(!a){h.hide();return}h.html(a)};o=function(a){a=a||"Ooops.";k.empty().append(a)};n=function(a){g.empty();if(!a)g.append(i(q));else for(var b=0,c=a.length;b<c;b++)g.append(i(a[b]))};i=function(b){if(!b)return;var c=a("<a />",b);if(b.callback){var d=b.ctx?b.ctx:this;c.click(function(){b.callback.apply(d,arguments)})}return c};p=function(d){d.preventDefault();var c=a(this),e={el:this};b.confirm(j(c,e))};m=function(f){f.preventDefault();var e=a(this),c={el:this},d=e.attr("href");j(e,c);if(d.charAt(0)==="#"){c.content=a(d).html();b.open(c)}else a.get(d,function(a){c.content=a;b.open(c)})};q={text:"close","class":"primary close",href:"#close"};j=function(b,a){a=a||{};d(b,"title",a);d(b,"width",a);d(b,"height",a);d(b,"content",a);d(b,"processtext",a);d(b,"canceltext",a);d(b,"processcallback",a);d(b,"cancelcallback",a);a.action=b.attr("href");return a};d=function(b,a,c){if(b.data(a))c[a]=b.data(a)};b.confirm=function(j){var i={content:"Are you sure about that?",title:"please confirm"},d={},h=[],g={},e={};a.extend(d,i,j);g.text=d.canceltext||"close";g.href="#close";g["class"]=d["class"]||"close";g.callback=c[d.cancelcallback]||f;g.ctx=d.el||f;h.push(g);e.text=d.processtext||"ok";e.href=d.action||"#";e["class"]=(d["class"]||"danger")+" close";e.callback=c[d.processcallback]||f;e.ctx=d.el||f;h.push(e);d.actions=h;b.open(d)};b.center=function(){var d,b;d=Math.max(a(c).height()-e.outerHeight(),0)/2;b=Math.max(a(c).width()-e.outerWidth(),0)/2;e.css({top:d+a(c).scrollTop(),left:b+a(c).scrollLeft()})};b.open=function(d){r(d.title);o(d.content);n(d.actions);e.css({width:d.width||"auto",height:d.height||"auto"});b.center();a(c).bind("resize.modal",b.center);e.fadeIn("fast","swing");l.show()};b.close=function(){e.hide();l.hide();k.empty();h.empty();g.empty();a(c).unbind("resize.modal")};t=function(){s.append(h,k,g);e.append(s);e.hide()};a(function(){a("body").append(l,e);a("#modal").delegate(".close","click",b.close);a(".confirm").live("click",p);a(".dialog").live("click",m)});if(!c.dialog)c.dialog=b;t()})(window.jQuery,window)